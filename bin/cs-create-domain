#!/usr/bin/env node

var program = require('commander');
var CLI = require(__dirname + '/../lib/command-line').CommandLineInterface;
var commandLine = new CLI(program);

program
  .version(require('../package').version)
  .usage('--domain-name <domain name> [options]')
  .option('-d, --domain-name <domain name>',
          'The name of the domain that you are creating. Required.',
          String)
  .option('--database-path <path>',
          'database path [' + CLI.defaultDatabasePath + ']',
          String,
          CLI.defaultDatabasePath)
  .parse(process.argv);

commandLine.assertHaveDomainName();

if (commandLine.domain.exists()) {
  console.log('The domain [' + commandLine.domain.name + '] already exists.');
  return process.exit(1);
}

console.log('Creating domain [' + commandLine.domain.name + ']');

commandLine.domain.createSync();

console.log('Domain endpoints are currently being created. ' +
            'Use cs-describe-domain to check for endpoints.');
